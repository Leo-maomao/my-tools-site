# Tools 项目规范（毛毛的工具箱）

> **⚠️ 重要提醒：每次 git commit 后必须更新本文档底部的「提交记录」！**

---

## 规范依赖

本项目遵循 `../rules/CLAUDE.md` 及其索引的所有规范文档。

开发前请先阅读总纲，根据当前任务阅读对应的子文档。

---

## 项目特有配置

## AI API 代理

所有 AI 功能统一使用 Cloudflare Worker 代理：
- **Worker**: `ai-api.leo-maomao.workers.dev`
- **环境变量**: `QWEN_API_KEY`（阿里百炼 API Key）
- **路由**:
  - `/chat` - 通用对话
  - `/report` - 报告生成
  - `/summary` - 内容摘要

## 51.la 埋点事件

统计ID: `3OV3C1DLozIUagyB`

| 事件标识 | 事件名称 | 说明 | 参数 |
|---------|---------|------|------|
| `menu_click` | 菜单点击 | 左侧主菜单点击 | menu_name: 首页/小红书/产品助理/报告小助手/基金助手/设置 |
| `tool_click` | 工具卡片点击 | 首页四个工具入口点击 | tool_name: 工具名称 |
| `xhs_optimize` | 小红书一键优化 | AI 一键优化内容 | fields_count: 优化字段数 |
| `xhs_generate` | 小红书生成图片 | 生成封面/正文图 | has_cover, has_content |
| `xhs_download` | 小红书下载 | 下载生成的图片 | images_count: 图片数量 |
| `pa_use` | 产品助理使用 | 发送消息（按会话统计） | conversation_id, message_count |
| `report_generate` | 报告生成 | 生成工作报告 | report_type, template, format, model |
| `fund_add` | 基金添加自选 | 添加基金到自选 | watchlist_count: 当前自选数量 |
| `component_view` | 组件预览 | 查看组件（UV 去重） | category: 分类, component: 组件名 |
| `component_copy` | 组件复制 | 复制组件代码 | category: 分类, component: 组件名, type: html/css/js/all |

## 项目功能

### 已实现
- ✅ **小红书工具**：封面图和正文图生成，支持自动分页
  - 封面图生成（自定义背景图）
  - 正文图生成（9宫格布局）
  - 自动分页功能
  - 一键下载所有图片

- ✅ **产品助理**：AI 辅助生成原型图和 PRD
  - AI 对话生成原型（接入阿里百炼 qwen-plus）
  - 原型 HTML 实时预览（iframe隔离 + 缩放控制）
  - 全屏预览模式
  - 一键下载 PNG
  - 产品/竞品配置管理
  - 对话历史保存 + 标题自定义
  - 图片粘贴/上传发送（多模态对话）

- ✅ **报告小助手**：AI 帮你写工作报告
  - 支持日报/周报/季报/半年报/年报
  - 多种模板：简洁版、详细版、OKR版、站会版、总结版、复盘版
  - 多种输出格式：纯文本、Markdown（渲染）、富文本
  - 根据报告类型动态调整可选模板
  - 支持编辑生成结果后复制
  - API Key 安全存储在 Worker 环境变量

- ✅ **每日日报**：快速生成每日工作报告

- ✅ **短剧工坊**：AI 生成短视频脚本和分镜
  - 5步流程：剧本设定 → 生成剧本 → 生成分镜图 → 生成视频 → 下载成品
  - AI 生成剧本和分镜图
  - 视频合成和导出功能
  - 紧凑卡片网格布局

- ✅ **基金助手**：基金投资辅助工具

- ✅ **组件库**：UI 组件预览与代码复制
  - 组件分类导航（布局/基础/导航/数据录入/数据展示/反馈）
  - 组件实时预览
  - 代码查看抽屉（HTML/CSS/JS 标签切换）
  - 一键复制代码
  - 组件使用统计（UV/PV 埋点）

### 待开发
- ⏳ 抖音工具：短视频脚本和封面生成
- ⏳ 公众号工具：图文排版和封面设计
- ⏳ 微博工具：长图文和九宫格图片生成

---

## 提交记录

| 日期 | Commit | 说明 |
|-----|--------|------|
| 2026-01-05 | `78d60c0` | feat: 新增组件库功能，支持组件预览和代码复制；优化组件交互功能 |
| 2026-01-03 | `e33aed2` | feat: 小红书助手支持正文图片插入和自定义大小 |
| 2025-12-26 | `8277cd3` | refactor: 优化埋点事件，按需求调整 |
| 2025-12-26 | `4c6ff8a` | feat: 添加 51.la 埋点统计 |
| 2025-12-26 | `b0d6412` | feat: 工具权限控制，短剧工坊仅管理员可见 |
| 2025-12-25 | `aceec64` | feat: 短剧工坊多项功能优化和修复 |
| 2025-12-24 | `b9b2c58` | refactor: 优化所有工具页面布局，充分利用视口空间 |
| 2025-12-23 | `24eab62` | refactor: API配置只管理Key，模型选择移到工具页 |
| 2025-12-22 | `1ff55af` | feat: 优化响应式设计，统一断点和滚动处理 |
| 2025-12-17 | `dd90abe` | feat: 新增基金助手工具 + 公共组件模块 |
| 2025-12-16 | `7074964` | feat: 短剧工坊多项优化 |
| 2025-12-16 | `62ea53a` | fix: 视频合成后显示结果页面而非直接下载 |
| 2025-12-16 | `9fedd94` | refactor: 分镜图页面改为紧凑卡片网格布局 |
| 2025-12-16 | `f9b03ad` | fix: 步骤指示器颜色优化 |
| 2025-12-16 | `6178838` | fix: 短剧工坊UI优化和功能完善 |
| 2025-12-15 | `1bf4998` | feat: 短剧工坊重构为5步流程，新增分镜图和视频生成 |
| 2025-12-15 | `5941ac0` | refactor: 优化产品助理AI回复格式化 |
| 2025-12-15 | `c1ea2f0` | docs: 更新CLAUDE.md，添加报告小助手和AI API代理说明 |
| 2025-12-15 | `e1c0d7b` | fix: 使用独立Worker代理AI API |
| 2025-12-15 | `457a6e4` | fix: 删除wrangler.toml让CF自动识别Pages Functions |
| 2025-12-15 | `4df41ef` | fix: 修改wrangler配置支持Pages Functions |
| 2025-12-15 | `34a524d` | feat: 新增报告小助手工具 |
| 2025-12-14 | `7b70976` | 删除 flow 项目文件 |
| 2025-12-12 | `2b27652` | chore: 暂存 Flow 首页开发进度 |
| 2025-12-12 | `2e96dcd` | feat: 新增 Flow 工具首页 |
| 2025-12-11 | `c3483a6` | feat: 优化产品助理交互体验 |
| 2025-12-11 | `e486991` | docs: 更新产品助理功能列表和提交记录 |
| 2025-12-11 | `33055bf` | feat: 产品助理新增三项功能 |
| 2025-12-11 | `8d38f84` | fix(tools): 优化产品助理页面适配和样式 |
| 2025-12-11 | `e0a5033` | fix: 微调图标垂直位置 |
| 2025-12-11 | `d1e7a47` | fix: 修复提示图标垂直居中(line-height) |
| 2025-12-11 | `e500827` | fix: 修复提示图标垂直居中 |
| 2025-12-11 | `1f2d0cb` | fix: 完善产品助理功能 |
| 2025-12-11 | `398113e` | fix: 修复产品助理UI问题 |
| 2025-12-11 | `a3443a5` | docs: 更新 CLAUDE.md 添加产品助理功能记录 |
| 2025-12-11 | `7fda6f9` | feat: 新增毛毛的产品助理工具 |
| 2025-12-11 | `ea38252` | chore: 规范化 .gitignore |
| 2025-12-10 | `c7a2932` | style: 优化侧边栏 hover/active 效果 |
| 2025-12-10 | `aca971a` | chore: 代码规范化 - 清理console.log、统一设计风格 |
